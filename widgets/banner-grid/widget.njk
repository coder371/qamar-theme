{# Banner Grid Widget #}

{% set gridCols = {
  '2': 'md:grid-cols-2',
  '3': 'md:grid-cols-3',
  '4': 'md:grid-cols-2 lg:grid-cols-4'
}[widget.data.layout] | default('md:grid-cols-2') %}

{% set gapClass = {
  '2': 'gap-2',
  '4': 'gap-4',
  '6': 'gap-6'
}[widget.data.gap] | default('gap-4') %}

<section class="banner-grid py-8 md:py-12">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 {{ gridCols }} {{ gapClass }}">
      {% for banner in widget.blocks %}
        <a
          href="{{ banner.data.link | default('#') }}"
          class="group relative block overflow-hidden rounded-xl"
          style="aspect-ratio: {{ widget.data.aspect_ratio | default('3/2') }}">

          {# Background Image #}
          {% if banner.data.image %}
            <img
              src="{{ banner.data.image }}"
              alt="{{ banner.data.title | default('') }}"
              class="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
              loading="lazy">
          {% else %}
            <div class="absolute inset-0 bg-gradient-to-br from-primary to-secondary"></div>
          {% endif %}

          {# Overlay #}
          {% if banner.data.overlay_opacity != '0' %}
            <div class="absolute inset-0 bg-black/{{ banner.data.overlay_opacity | default('30') }}"></div>
          {% endif %}

          {# Content #}
          {% if banner.data.title or banner.data.subtitle %}
            <div class="absolute inset-0 flex flex-col items-center justify-center text-center text-white p-6">
              {% if banner.data.subtitle %}
                <span class="text-sm md:text-base opacity-90 mb-2">{{ banner.data.subtitle }}</span>
              {% endif %}
              {% if banner.data.title %}
                <h3 class="text-xl md:text-2xl lg:text-3xl font-bold">{{ banner.data.title }}</h3>
              {% endif %}
            </div>
          {% endif %}
        </a>
      {% endfor %}
    </div>
  </div>
</section>
